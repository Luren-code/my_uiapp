# 🎯 删除API调用任务对齐文档

## 📋 项目上下文分析

### 当前项目架构
- **框架**: uni-app (支持微信小程序、H5等多端)
- **主要页面**: 
  - 首页 (`pages/index/index.vue`) - 职业搜索入口
  - 职业详情页 (`pages/occupation-detail/detail.vue`)
  - EOI排名、资源、上岸中心等页面
- **数据层**: 
  - 静态数据 (`data/occupations.js`) - 包含499个职业数据
  - 多个API服务文件 (6个API文件)
  - 搜索和历史记录工具

### 当前API调用分析
通过代码分析发现以下API调用点：

1. **主要API调用**:
   - `pages/index/index.vue` 第289行: `beginnerAPI.getOccupations()`
   - `components/OfficialDataStatus.vue` 第122行: `realOfficialAPI.fetchRealOccupationData()`

2. **API服务文件**:
   - `api/beginner-simple-api.js` - 新手友好API (389行)
   - `api/enhanced-api-service.js` - 增强API服务 (791行)
   - `api/real-official-api.js` - 真实官方API (356行)
   - `api/skillselect-api.js` - SkillSelect API (492行)
   - `api/commercial-data-sources.js` - 商业数据源 (758行)
   - `api/simple-api-service.js` - 简单API服务

3. **数据流向**:
   ```
   页面组件 → API服务 → 外部API调用 → 数据处理 → 返回结果
   ```

## 🎯 任务需求理解

### 原始需求
用户要求："删掉所有API调用，只保留最小可用版本"

### 需求解析
1. **删除范围**: 所有外部API调用和相关的API服务文件
2. **保留内容**: 基于静态数据的最小功能版本
3. **功能要求**: 应用仍需正常运行，提供基本的职业搜索功能

### 边界确认
- ✅ **删除**: 所有API文件、外部网络请求、数据加载逻辑
- ✅ **保留**: 静态职业数据、搜索功能、页面导航、UI组件
- ✅ **简化**: 数据状态管理、加载动画、错误处理

## 🔍 技术实现方案

### 数据源策略
- **主数据源**: `data/occupations.js` (已有499个职业数据)
- **搜索功能**: 保留现有的 `searchOccupations` 函数
- **数据格式**: 保持现有数据结构，确保兼容性

### 代码修改策略
1. **首页修改**: 移除API调用，直接使用静态数据
2. **组件清理**: 删除API相关的状态管理和加载逻辑
3. **文件删除**: 删除所有API服务文件
4. **依赖清理**: 移除API相关的import语句

### 技术约束
- 保持uni-app框架结构不变
- 保持现有UI/UX设计
- 确保所有页面跳转正常工作
- 保持搜索历史功能

## ✅ 验收标准

### 功能验收
1. 应用启动正常，无API调用错误
2. 职业搜索功能完整可用
3. 职业详情页面正常显示
4. 页面间导航无异常
5. 搜索历史功能正常

### 代码质量
1. 无未使用的API相关代码
2. 无网络请求相关代码
3. 控制台无API调用错误
4. 代码结构清晰简洁

### 性能要求
1. 应用启动速度提升（无网络等待）
2. 搜索响应速度快（纯本地搜索）
3. 内存占用减少（无API缓存）

## 🚨 风险评估

### 潜在风险
1. **数据时效性**: 静态数据可能过时
2. **功能限制**: 无法获取最新的官方数据
3. **用户体验**: 用户可能期望实时数据

### 风险缓解
1. 在UI中明确标示使用静态数据
2. 保留数据更新的接口设计，便于后续扩展
3. 确保静态数据的准确性和完整性

## 📝 实施计划

### 阶段划分
1. **分析阶段**: 确定所有API调用点
2. **架构阶段**: 设计简化的数据流
3. **实施阶段**: 逐步删除API调用，修改相关代码
4. **测试阶段**: 验证功能完整性
5. **清理阶段**: 删除无用文件和代码

### 优先级
- **高优先级**: 主要功能页面的API调用删除
- **中优先级**: 组件级别的API调用清理
- **低优先级**: 文档和配置文件的清理

